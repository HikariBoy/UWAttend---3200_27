{% extends "base.html" %}
{% block content %}

<!-- Flash Messages -->

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
{%if category == 'error'%}
<div class="alert alert-danger alert-dismissable fade show d-flex justify-content-between" role="alert">
	{{ message }}
	<button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% else %}
<div class="alert alert-success alert-dismissable fade show d-flex justify-content-between" role="alert">
	{{ message }}
	<button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}
{% endfor %} {% endif %} {% endwith %}

<div class="container-fluid">
    <div class="mt-2 mx-md-5 mx-2 d-flex flex-column align-items-center">
        <h2 class="mb-3">Profile</h2>
    </div>

    <div class="container-sm vstack gap-3 justify-content-center">
        <div class="row">
            <div class="col text-end">Email:</div>
            <div class="col">{{ email }}</div>
        </div>
        <div class="row">
            <div class="col text-end">Type:</div>
            <div class="col">{{ accountType|capitalize }}</div>
        </div>
        <div class="row" id="first-name-div">
            <div class="col text-end">First name:</div>
            <div class="col">{{ fname }}</div>
        </div>
        <div class="row" id=last-name-div>
            <div class="col text-end">Last name:</div>
            <div class="col">{{ lname }}</div>
        </div>
        <form id='edit-names-form' method="POST" class="d-none">
            {{ form.hidden_tag() }}
            <div class="row">
                {{ form.firstName.label(class="form-label col text-end")}}
                {{ form.firstName(class="form-control col", value=fname)}}
            </div>
            <div class="row">
                {{ form.lastName.label(class="form-label col text-end") }}
                {{ form.lastName(class="form-control col", value=lname) }}
            </div>
            <div class="mt-3 mb-3 d-flex justify-content-center">
                {{ form.submit(class="btn btn-success text-center", id="save-names-button") }}
            </div>
        </form>
        <div  id="edit-names-button" class="mt-2 mb-3 d-flex justify-content-center">
            <button class="btn btn-secondary" onclick="editNames()">Edit Names</button>
        </div>
        </div>
        <div class="d-flex gap-3 justify-content-center">
            <a class="btn btn-primary" href="{{ url_for('forgot_password') }}">Reset Password</a>
        </div>
    </div>

            
</div>

<script src="{{url_for('static', filename='js/profile.js')}}"></script>
{% endblock %}